![image](https://github.com/user-attachments/assets/c3334c1a-53a8-4fc2-9fec-74358e8dc870)

# 01 관계 데이터 연산의 개념
데이터 모델읜 구조, 연산, 제약조건으로 이루어진다. 그 중 연산에 대해 알아보자.
## 관계 데이터 연산 
### 처리 절차를 얼마나 자세히 기술하냐의 차이
1. 관게대수 (절차 언어) - 데이터의 처리과정을 순서대로 기술
2. 관계해석 (비절차 언어) - 원하는 데이터가 무엇인지만 기술     
관계대수와 관계해석은 상용화된 DB에서 실제로 사용되지 않는 개념적 언어이지만,     
새로운 데이터언어가 제안되면 해당 데이터언어의 유용성 검증기준에 사용된다.    
관게대수나 관계해석으로 기술할 수 있는 모든 질의를 새로운 데이터언어로 기술 가능하면 '관계적으로 완전하다' 라고 판단하며,    
어느정도 언어가 검증되었다고 판단한다.



# 02 관계 대수
관계 대수는 원하는 결과를 얻기위해 릴레이션을 처리하는 과정을 순서대로 기술하는 언어다.
- 연산자들의 집합으로 정의 가능하다.
- 피연산자, 연산결과 둘다 릴레이션인데 이러한 관계대수 속성을 폐쇄속성이라고 한다.
- 일반집합 연산자 4개 , 순수관계 연산자 4개로 분류된다.
## 일반집합 연산자
- 일반집합 연산자 : 합집합, 교집합, 차집합, 카티션 프로덕트(새로운 투플 반환)
- 제약조건    
1. 일반 집합 연산자는 연산을 위해 피연산자가 2개 필요하다. 즉 2개의 릴레이션이 필요하다.
2. 두 릴레이션의 차수가 같아야한다. 또한 서로 대응되는 속성의 도메인이 같아야한다.(도메인이 같으면 속성이름은 달라도 된다.)
3. 단, 카티션 프로덕트는 위 합병가능여부 상관없이 연산이 가능하다.
### 합집합
- 교환적 특성: 𝑅 ∪ 𝑆 = 𝑆 ∪ 𝑅(순서 변경 가능)

- 결합적 특성: 𝑅 ∪ ( 𝑆 ∪ 𝑇 ) = ( 𝑅 ∪ 𝑆 ) ∪ 𝑇 (연산 순서 변경 가능)
- 릴레이션의 결과는 두 릴레이션의 투플 개수를 더한 것과 같거나 작아진다. (두 릴레이션의 투플이 중복될 수 있기 때문)
### 교집합
- 교환적 특성이 있다.
- 결합적 특성이 있다.
- 카디널리티(속성) 수는 어떤 카디널리티보다 크지 않다. 같거나 작아진다.
- 릴레이션의 결과는 각 릴레이션의 투플 개수(인스턴스 수)가 같거나 작아진다.

### 차집합
- 교환적, 결합적 특성이 없다.
- R-S은 R의 카디널리티와 같거나 작고, S-R은 S의 카디널리티와 같거나 적다.
### 카티션 프로덕트
- 교환적, 결합적 특성이 있다.
- 릴레이션이 어느 경우든지 가능하다. (릴레이션의 합병 불가능한 상태여도)
1. 각 릴레이션의 차수는 두 릴레이션의 차수를 더한것과 같다.   
2. 카디널리티는 두 릴레이션의 카디널리티를 곱한 것과 같다.
--- 
## 순수관계 연산자
- **순수관계 연산자**: 셀렉트, 프로젝트, 조인, 디비전  
  관계 데이터 모델에서 새로 제시된 연산자이다.

### 셀렉트 (수평적 연산자)
- 기호: **σ** (시그마 기호 사용)
- 주어진 조건을 만족하는 투플(인스턴스)을 선택하는 연산
- 교환적 특성이 있다.
- 릴레이션이 수평으로 절단된 형태
- 하나의 릴레이션을 대상으로 수행
- 비교연산자(= , !=, >, <, >=, <=)를 이용
- 조건식을 비교식 또는 프레디킷이라 한다.
- 일반적인 데이터언어 형식으로 `WHERE` 문으로 표현 가능.  
  예) 릴레이션 `WHERE` 조건식

### 프로젝트 (수직적 연산자)
- 기호: **π** (파이 기호 사용)
- 일부의 속성(열)에 해당하는 값으로 결과를 구성
- 결과상 중복은 제거되어 동일한 투플이 중복되지 않고 한 번만 나온다. → 릴레이션의 기본 특성을 만족시키는 결과.

### 조인
- 기호: **⨝** (조인 기호 사용)
- 주로 동등조인을 의미한다.
- 두 릴레이션을 조합하여 하나의 릴레이션을 구성
- 두 릴레이션이 공통으로 가지고 있는 속성을 통해 연결하여 새로운 투플을 포함한다.
- 조인의 결과는 두 릴레이션에 카티션 프로덕트를 한 후, 조인 속성의 조건을 만족하는 투플만 반환하는 셀렉트 연산과 같다.  
  (카티션 프로덕트 + 셀렉트)

### 세타 조인
- 기호: **⨝θ** (세타 조인 기호 사용)
- 동등조인에 비해 더 일반화된 조인으로, 세타에는 비교연산자가 들어간다. 세타 조인의 연산자가 `=`가 쓰이면 동등조인이다.
- 주어진 조건을 만족하는 모든 투플을 연결한 새로운 투플로 결과 릴레이션을 구성
- 같은 도메인에 대해 비교 연산자로 연산한다.
- 세타 조인의 차수는 각 릴레이션의 차수를 더한 것과 같다.
- 따라서 만일 같은 이름의 차수가 있었으면 릴레이션1.차수, 릴레이션2.차수와 같은 표기법으로 구분한다.
- 동등 조인 연산은 모든 속성을 포함하기 때문에 조인 속성이 중복되어 나오는 것이다.
- 이러한 중복이 싫다면 자연 조인 연산을 수행하면 된다.
- 자연조인은 동등조인에서 중복된 속성을 제거하여 한 번만 나타낸다.

### 디비전
- 기호: **÷** (디비전 기호 사용)
- R ÷ S는 R 릴레이션이 S 릴레이션의 모든 속성을 포함한 상태에서 가능하다.  
  이는 속성 이름이 같다는 것이 아니라, 대응되는 속성의 도메인이 일치해야 한다는 것이다.

---

## 관계대수를 이용한 질의 표현
### 조인 종류

#### 세미 조인 (Semi Join)
세미 조인은 두 릴레이션에서 일치하는 값을 찾는 연산으로, 두 번째 릴레이션에서 일치하는 투플만 포함하지만, 첫 번째 릴레이션의 모든 컬럼을 반환한다.  
예를 들어, 첫 번째 릴레이션에서 일치하는 값만을 찾고자 할 때 유용하다.

- **R ⋉ S**  
  R과 S의 공통 속성에 맞는 값이 존재하는 투플만 반환된다. 하지만 R에서만 속성 값이 반환된다.

**특징**:
- 결과는 첫 번째 릴레이션에서 반환된 모든 속성을 포함한다.
- 성능 측면에서 다른 조인보다 효율적일 수 있다. 왜냐하면 두 번째 릴레이션에서 불필요한 데이터를 필터링하여 첫 번째 릴레이션의 결과만 반환하기 때문이다.

#### 외부 조인 (Outer Join)
외부 조인은 일반적인 동등 조인 외에도, 두 릴레이션에서 일치하지 않는 값을 포함하는 연산이다. 외부 조인은 좌측 외부 조인(Left Outer Join), 우측 외부 조인(Right Outer Join), **전체 외부 조인(Full Outer Join)**으로 구분된다.

- **R ⟕ S** (좌측 외부 조인)
- **R ⟖ S** (우측 외부 조인)
- **R ⟗ S** (전체 외부 조인)

**특징**:
- 외부 조인은 일치하는 값이 없을 경우, NULL을 반환하여 데이터가 손실되지 않도록 한다.
- NULL 값을 포함하여 결과가 반환되므로, 실제 비즈니스 로직에 맞게 처리해야 한다.
- 외부 조인은 성능 측면에서 다른 조인보다 더 많은 메모리와 시간이 소요될 수 있다.

---

### 관계 해석
7장에서 배우는 관계 해석은 비절차적 언어로 원하는 결과를 명시하는 방식이다. 이를 실제 DB 시스템에서 구현할 수 있는 SQL로 표현할 수 있다.

